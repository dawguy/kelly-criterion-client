{"version":3,"sources":["rowing_client/splits.cljs"],"mappings":";AAEA,6BAAA,7BAAKA;AACL,yBAAA,zBAAKC;AAEL,gCAAA,hCAAMC,wEAAUC,IAAIC;AAApB,AACE,GAAM,CAAGD,MAAI,AAACE,gBAAM,AAACC,gBAAM,qBAAA,WAAAC,hCAACC;AAAD,AAAa,uDAAA,IAAAD,pDAACE;GAAYL;AAC/C,QAAA,gDAAS,iBAAAM,WAAU,OAAA,NAAKP;IAAfQ,WAAoBP;AAApB,AAAA,kIAAAM,SAAAC,oDAAAD,SAAAC,hMAACT,8DAAAA,iFAAAA;;;AADhB,AAEYE;;;;AAGd,8BAAA,9BAAMQ,oEAAQR;AAAd,AACE,4EAAA,xBAAK,AAACS,WAAW,KAAA,JAAGT,4DAAW,8BAAA,9BAACF,kCAAW,sCAAA,tCAAU,AAACY,OAAU,gBAAA,hBAACC,cAAIX;;AAEvE,oCAAA,pCAAMY,gFAAcC;AAApB,AACE,IAAMb,IAAE,CAAA,QAAO,AAACc,UAAU,CAAA,MAAQD;AAAlC,AACa,GAAM,gDAAA,hDAACR,oDAAOQ;AACV,OAACL,4BAAOR;;AADZ,AAAA;;;;AAIf,AAAA,2CAAA,mDAAAe,9FAAME;AAAN,AAAA,IAAAD,WAAA,AAAA;AAAA,AAAA,QAAAA;KAAA;AAAA,OAAAC,uEAAA,CAAA,UAAA;;;KAAA;AAAA,OAAAA,uEAAA,CAAA,UAAA,MAAA,CAAA,UAAA;;;;AAAA,MAAA,KAAAC,MAAA,CAAA,8DAAA,AAAA;;;;;AAAA,CAAA,yEAAA,zEAAMD,oFACFjB;AADJ,AAEE,QAAA,MAAQ,qBAAA,rBAACmB,SAAS,KAAA,JAAGnB;;;AAFvB,CAAA,yEAAA,zEAAMiB,oFAGFG,SAASC;AAHb,AAIE,QAAGD,WAAS,YAAA,XAAGC;;;AAJjB,CAAA,mEAAA,nEAAMJ;;AAAN,AAMA,iCAAA,jCAAMK,0EAAWC;AAAjB,AACE,AAACC,qGAAI,CAAA,4DAAqBD;;AAC1B,GAAI,EAAI,gGAAA,/FAAM,AAAA,qFAAQA,qBAAQ,6CAAA,7CAACE,iDAAI,AAAA,qFAAQF;AACzC,2DAAA,pDAACG,8CAAMH,6DAAa,AAACI,uEAAoB,AAAA,2FAAWJ,OAAO,AAAA,4FAAWA;;AACtEA","names":["kelly-criterion-client.splits/power","kelly-criterion-client.splits/s","kelly-criterion-client.splits/left-pad","qty","s","cljs.core/count","cljs.core/first","p1__37124#","cljs.core/split-with","cljs.core.not_EQ_","G__37130","G__37131","kelly-criterion-client.splits/toTime","Math/floor","js/Number","cljs.core/rem","kelly-criterion-client.splits/powerToSplit","power","Math/cbrt","var_args","G__37133","kelly-criterion-client.splits/splitSecondsToPower","js/Error","Math/pow","duration","distance","kelly-criterion-client.splits/add-power","split","cljs.core.prn","cljs.core._EQ_","cljs.core.assoc","rowing_client.splits.splitSecondsToPower"],"sourcesContent":["(ns kelly-criterion-client.splits)\n\n(def power 200)\n(def s \"135.25\")\n\n(defn left-pad [qty s]\n  (cond (> qty (count (first (split-with #(not= \".\" %) s))))\n        (str \"0\" (left-pad (dec qty) s))\n        :else s\n        ))\n\n(defn toTime [s]\n  (str (Math/floor (/ s 60)) \":\" (left-pad 2 (.toFixed (js/Number (rem s 60)) 1))))\n\n(defn powerToSplit [power]\n  (let [s (* 500 (Math/cbrt (/ 2.80 power)))]\n               (cond (not= 0 power)\n                   (toTime s)\n                   :else \"0:00.0\")))\n\n(defn splitSecondsToPower\n  ([s]\n  (/ 2.80 (Math/pow (/ s 500) 3)))\n  ([duration distance]\n  (/ duration (/ distance 500))))\n\n(defn add-power [split]\n  (prn (str \"add-power :: \" split))\n  (if (or (nil? (:power split)) (= 0 (:power split)))\n    (assoc split :power (splitSecondsToPower (:duration split) (:distance split)))\n    split))"]}